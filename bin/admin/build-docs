#!/usr/bin/env python

# Copyright (c) Twisted Matrix Laboratories.
# See LICENSE for details.

# This script is not meant to be distributed to users of Twisted.
# It is used for:
# * testing the narrative Sphinx docs (via CI)
# * getting local version for narrative Sphinx docs (via tox).

import sys
from twisted.python._release import SphinxBuilder

errors = SphinxBuilder().main(sys.argv[1:])

if not errors:
    # Build was successful.
    sys.exit(0)

for line in errors:
    # Emit captured Sphinx output as warnings.
    print(line, file=sys.stderr)
sys.exit(1)
